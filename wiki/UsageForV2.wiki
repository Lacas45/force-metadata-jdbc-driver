#summary How to use version 2.x of the driver with SchemaSpy (beta)

= Introduction =

This (beta) version of the driver doesn't offer new functionality but is packaged so that it should be easier to use. A single driver jar file is all that is required that contains the driver classes and also all the classes needed to access the Partner WSDL API to get the metadata information from an org.

= Running =

Here is how to generate the [http://schemaspy.sourceforge.net/ SchemaSpy] output for your Force.com org:

 * Download the [http://schemaspy.sourceforge.net/ SchemaSpy] jar
 * Download and install [http://www.graphviz.org/ Graphviz] that is used by !SchemaSpy to create the automatically laid out diagrams
 * Download the latest version of the [http://code.google.com/p/force-metadata-jdbc-driver/downloads/list Force Metadata JDBC driver] jar
 * In the folder that contains the jars just enter this (replacing the arguments that start with "My" with your own values and entering it all on one line):

{{{
java -cp schemaSpy_5.0.0.jar;force-metadata-jdbc-driver-2.0.jar net.sourceforge.schemaspy.Main
    -t force -u fake -p fake -host fake -un MyUserName -pw MyPasswordAndSecurityToken
    -font Arial -fontsize 8 -hq -norows -o doc -db MyDbName -desc "Extracted from MyDbName on Force.com"
}}}

Except for the -un and -pw arguments, these are all standard !SchemaSpy arguments that are explained in the [http://schemaspy.sourceforge.net/ SchemaSpy] web site. The file force.properties is now included in the driver jar and accessed from there. The only change needed for Mac/Unix is the -cp argument separator changing from ";" to ":".

By default all custom objects are output. The set of objects that are output can be customized by adding a -connprops argument. Here is an example that outputs five standard objects in addition to all the custom objects:
{{{
    -connprops excludes\=;includes\=Account,Contact,User,Task,Event
}}}
On Mac/Unix bash this would need to be:
{{{
    -connprops excludes\\=\;includes\\=Account,Contact,User,Task,Event
}}}
More details of how the -connprops can be used including how to change the URL to for example connect to a sandbox org are in the [http://code.google.com/p/force-metadata-jdbc-driver/wiki/Useage original usage page].

= Details =

Note that the code is built to work with Java 1.5 so will also work with Java 1.6. This new version of the driver has been tested with:

 * !SchemaSpy 5.0.0
 * Graphviz 2.26.3

Instead of the general purpose [http://axis.apache.org/axis/ Axis] web services stack the code is now using the [http://code.google.com/p/sfdc-wsc/ Force.com Web Service Connector (WSC)] web service client stack compiled for Java 1.5. Version 21 of the Partner WSDL API is used.

As this is all just standard Java code it is simple to also run it from Ant; our [http://force201.wordpress.com/2010/03/11/continuous-integration/ continuous integration build] generates the !SchemaSpy model each time code is check in.

Thanks to [http://chriswolf.heroku.com/ Chris Wolf] for the discussion that led to this approach; he also contributed the changes required to make the driver work with [http://www.modelsphere.org/ Open ModelSphere].